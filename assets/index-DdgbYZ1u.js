import{c as A,r as d,j as e}from"./index-03mpuTXX.js";import{N as V,C as U,a as q,Z as G,E as J,A as Z,B as K}from"./zap-Id0eZJY-.js";const P=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Q=A("circle-alert",P);const W=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],X=A("text-align-start",W),Y=o=>{const n=["React æ˜¯ä¸€ä¸ªç”¨äºŽæž„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ã€‚","è™šæ‹Ÿæ»šåŠ¨ï¼ˆVirtual Scrollingï¼‰æ˜¯å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ã€‚","Tailwind CSS æ˜¯ä¸€ä¸ªåŠŸèƒ½ç±»ä¼˜å…ˆçš„ CSS æ¡†æž¶ã€‚","åœ¨ä¸ç­‰é«˜åˆ—è¡¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åŠ¨æ€æµ‹é‡æ¯ä¸ªåˆ—è¡¨é¡¹çš„çœŸå®žé«˜åº¦ã€‚","å¦‚æžœä¸è¿›è¡Œä¼˜åŒ–ï¼Œæ¸²æŸ“ 10 ä¸‡ä¸ª DOM èŠ‚ç‚¹ä¼šå¯¼è‡´æµè§ˆå™¨å¡æ­»ã€‚","è¿™æ˜¯ä¸€æ®µæ¯”è¾ƒé•¿çš„æ–‡æœ¬ï¼Œæ—¨åœ¨æµ‹è¯•æ¢è¡ŒåŽçš„é«˜åº¦è®¡ç®—æ˜¯å¦å‡†ç¡®è¿™æ˜¯ä¸€æ®µæ¯”è¾ƒé•¿çš„æ–‡æœ¬ï¼Œæ—¨åœ¨æµ‹è¯•æ¢è¡ŒåŽçš„é«˜åº¦è®¡ç®—æ˜¯å¦å‡†ç¡®è¿™æ˜¯ä¸€æ®µæ¯”è¾ƒé•¿çš„æ–‡æœ¬ï¼Œæ—¨åœ¨æµ‹è¯•æ¢è¡ŒåŽçš„é«˜åº¦è®¡ç®—æ˜¯å¦å‡†ç¡®è¿™æ˜¯ä¸€æ®µéžå¸¸éžå¸¸é•¿çš„æ–‡æœ¬ï¼Œç”¨æ¥æµ‹è¯•è‡ªåŠ¨æ¢è¡ŒåŽçš„é«˜åº¦å˜åŒ–ã€‚å®ƒåŒ…å«äº†å¾ˆå¤šåºŸè¯ï¼Œä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†æŠŠè¿™ä¸ª div æ’‘é«˜ï¼Œçœ‹çœ‹æˆ‘ä»¬çš„æµ‹é‡é€»è¾‘å‡†ä¸å‡†ã€‚å¦‚æžœä¸å‡†çš„è¯ï¼Œåˆ—è¡¨å°±ä¼šæŠ–åŠ¨ï¼Œç”¨æˆ·ä½“éªŒå°±ä¼šå¾ˆå·®ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»ä½¿ç”¨ ResizeObserver æˆ–è€… getBoundingClientRect æ¥ç²¾ç¡®èŽ·å–é«˜åº¦ã€‚","çŸ­æ–‡æœ¬ã€‚","ä¸­ç­‰é•¿åº¦çš„æ–‡æœ¬ï¼Œå¤§æ¦‚å æ®ä¸¤è¡Œå·¦å³çš„ç©ºé—´ï¼Œå…·ä½“å–å†³äºŽå±å¹•å®½åº¦ã€‚"];return Array.from({length:o},(f,x)=>({id:x,index:x,content:n[Math.floor(Math.random()*n.length)],color:x%2===0?"bg-white":"bg-gray-50"}))},C=1e3,N=80,ee=500,h={SMART:{id:"smart",name:"Smart Hybrid",desc:"æ™ºèƒ½åˆ¤æ–­ï¼šè¿‘è·ç¦»å¹³æ»‘ï¼Œè¿œè·ç¦»çž¬ç§»",icon:e.jsx(K,{size:16})},NATIVE:{id:"native",name:"Native Smooth",desc:"å¼ºåˆ¶åŽŸç”Ÿå¹³æ»‘ (å¯èƒ½æœ‰è¯¯å·®)",icon:e.jsx(Z,{size:16})},BLUR:{id:"blur",name:"Blur & Teleport",desc:"æ¨¡ç³Šçž¬ç§» (å¼ºçƒˆæŽ¨è)",icon:e.jsx(J,{size:16})},FLASH:{id:"flash",name:"Flash Skip",desc:"åˆ†æ®µåŠ é€ŸåŠ¨ç”»",icon:e.jsx(G,{size:16})}},g=Y(C);function oe(){const o=d.useRef(null),[n,f]=d.useState(()=>g.map((t,s)=>({index:s,height:N,top:s*N,bottom:(s+1)*N,isMeasured:!1}))),[x,m]=d.useState(0),[b,R]=d.useState(h.SMART.id),[y,E]=d.useState(""),[z,w]=d.useState(!1),[S,u]=d.useState(null),B=n[n.length-1].bottom,T=t=>{let s=0,r=n.length-1,a=-1;for(;s<=r;){const l=Math.floor((s+r)/2),c=n[l].bottom;if(c===t)return l+1;c<t?s=l+1:((a===-1||a>l)&&(a=l),r=l-1)}return a},v=T(x),M=Math.min(v+10,g.length),L=g.slice(v,M),_=t=>{requestAnimationFrame(()=>{m(t.target.scrollTop)})},D=(t,s)=>{f(r=>{const a=r[t];if(a.isMeasured&&Math.abs(a.height-s)<.5)return r;const l=[...r];if(l[t]={...a,height:s,bottom:a.top+s,isMeasured:!0},s-a.height!==0)for(let i=t+1;i<l.length;i++)l[i].top=l[i-1].bottom,l[i].bottom=l[i].top+l[i].height;return l})},j=t=>{if(!o.current)return;let s=0;if(t==="top"?s=0:t==="bottom"?s=g.length-1:s=parseInt(t,10),isNaN(s))return;s=Math.max(0,Math.min(s,g.length-1));const r=n[s].top,a=o.current.scrollTop,l=T(a),c=Math.abs(s-l);switch(b){case h.SMART.id:c<=50?(u(`è¿‘è·ç¦» (${c}) -> å¹³æ»‘æ»šåŠ¨`),k(r)):(u(`è¿œè·ç¦» (${c}) -> æ¨¡ç³Šçž¬ç§» (æŽ¨è)`),I(r));break;case h.NATIVE.id:u("æ‰§è¡ŒåŽŸç”Ÿå¹³æ»‘æ»šåŠ¨"),k(r);break;case h.BLUR.id:u("æ‰§è¡Œæ¨¡ç³Šçž¬ç§»"),I(r);break;case h.FLASH.id:u("æ‰§è¡Œåˆ†æ®µå¸§åŠ¨ç”»"),O(a,r,r-a);break;default:o.current.scrollTop=r}},k=t=>{o.current.scrollTo({top:t,behavior:"smooth"})},I=async t=>{w(!0),await new Promise(s=>setTimeout(s,200)),o.current.scrollTop=t,requestAnimationFrame(()=>{setTimeout(()=>w(!1),80)})},O=(t,s,r)=>{const a=performance.now(),l=800,c=Math.abs(r)>3e3,i=H=>{const $=H-a,p=Math.min($/l,1),F=p<.5?4*p*p*p:1-Math.pow(-2*p+2,3)/2;c&&p>.4&&p<.7?o.current.scrollTop=t+r*.95:o.current.scrollTop=t+r*F,p<1?requestAnimationFrame(i):o.current.scrollTop=s};requestAnimationFrame(i)};return e.jsx("div",{className:"h-[calc(100vh-88px)] flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-4xl bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-200 flex flex-col md:flex-row",children:[e.jsxs("div",{className:"w-full md:w-72 bg-gray-50 border-r border-gray-200 p-5 flex flex-col gap-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2 mb-1",children:[e.jsx(X,{size:20,className:"text-purple-600"}),"ä¸ç­‰é«˜åˆ—è¡¨"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Total: ",C," (Dynamic Height)"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Scroll Strategy"}),e.jsx("div",{className:"flex flex-col gap-2",children:Object.values(h).map(t=>e.jsxs("button",{onClick:()=>{R(t.id),u(null)},className:`flex items-start gap-3 p-3 rounded-lg text-left transition-all border ${b===t.id?"bg-white border-purple-500 shadow-md ring-1 ring-purple-500":"bg-white border-gray-200 hover:border-purple-300 hover:bg-purple-50"}`,children:[e.jsx("div",{className:`mt-1 ${b===t.id?"text-purple-600":"text-gray-400"}`,children:t.icon}),e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-bold ${b===t.id?"text-purple-700":"text-gray-700"}`,children:t.name}),e.jsx("div",{className:"text-xs text-gray-500 mt-0.5 leading-tight",children:t.desc})]})]},t.id))})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-200",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Navigation"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"Index...",value:y,onChange:t=>E(t.target.value),onKeyDown:t=>t.key==="Enter"&&j(y),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),e.jsx("button",{onClick:()=>j(y),className:"px-4 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:e.jsx(V,{size:18})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsxs("button",{onClick:()=>j("top"),className:"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 rounded-md text-sm text-gray-600 hover:text-purple-600 hover:border-purple-500",children:[e.jsx(U,{size:16})," Top"]}),e.jsxs("button",{onClick:()=>j("bottom"),className:"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 rounded-md text-sm text-gray-600 hover:text-purple-600 hover:border-purple-500",children:[e.jsx(q,{size:16})," Bottom"]})]})]})]}),e.jsxs("div",{className:"flex-1 relative bg-white h-[600px] md:h-auto flex flex-col",children:[e.jsxs("div",{className:"absolute top-4 right-4 z-10 flex flex-col items-end gap-2 pointer-events-none",children:[e.jsxs("div",{className:"bg-gray-900/80 backdrop-blur text-white px-3 py-1.5 rounded-full text-xs font-mono shadow-lg",children:["View: ",v," - ",M]}),S&&e.jsx("div",{className:"bg-purple-600/90 backdrop-blur text-white px-3 py-1.5 rounded-full text-xs font-bold shadow-lg animate-fade-in-down",children:S})]}),e.jsx("div",{className:"flex-1 p-6 overflow-hidden",children:e.jsx("div",{ref:o,className:`
                relative overflow-auto border border-gray-200 rounded-xl shadow-inner bg-gray-50 custom-scrollbar
                transition-all duration-300 ease-in-out
                ${z?"opacity-40 blur-[2px] scale-95":"opacity-100 blur-0 scale-100"}
              `,style:{height:ee},onScroll:_,children:e.jsx("div",{style:{height:B,position:"relative"},children:L.map(t=>{const s=n[t.index];return e.jsx(te,{item:t,isTarget:t.index===parseInt(y),style:{position:"absolute",top:s.top,left:0,width:"100%"},onMeasure:D},t.id)})})})}),e.jsxs("div",{className:"p-3 bg-purple-50 border-t border-purple-100 text-xs text-purple-600 flex items-start gap-2",children:[e.jsx(Q,{size:14,className:"mt-0.5 shrink-0"}),'æ³¨æ„è§‚å¯Ÿï¼šè·³è½¬åˆ°æœªæ¸²æŸ“åŒºåŸŸæ—¶ï¼Œåˆ—è¡¨å¯èƒ½ä¼šåœ¨åŠ è½½çž¬é—´è½»å¾®æŠ–åŠ¨ï¼Œè¿™æ˜¯å› ä¸ºé¢„ä¼°é«˜åº¦(80px)ä¸ŽçœŸå®žé«˜åº¦ä¸ç¬¦ï¼Œè§¦å‘äº†ä¿®æ­£é€»è¾‘ã€‚ä½¿ç”¨ "Blur" æ¨¡å¼å¯å®Œç¾ŽæŽ©ç›–æ­¤çŽ°è±¡ã€‚']})]})]})})}const te=({item:o,style:n,onMeasure:f,isTarget:x})=>{const m=d.useRef(null);return d.useLayoutEffect(()=>{m.current&&f(o.index,m.current.getBoundingClientRect().height)},[]),e.jsxs("div",{ref:m,style:n,className:`
        p-4 border-b border-gray-100 flex gap-4 transition-all duration-500
        ${x?"bg-purple-100 scale-[1.02] z-10 shadow-sm":`${o.color} hover:bg-purple-50`}
      `,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center font-bold text-sm shrink-0",children:o.index}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-bold text-gray-800 text-sm mb-1 flex justify-between",children:[e.jsxs("span",{children:["Dynamic Row #",o.index]}),x&&e.jsx("span",{className:"text-purple-600 text-xs",children:"ðŸŽ¯ Target"})]}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:o.content})]})]})};export{oe as default};
