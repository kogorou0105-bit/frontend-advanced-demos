import{r as o,j as e}from"./index-03mpuTXX.js";function h(r,c){const[l,i]=o.useState(r);return o.useEffect(()=>{const d=setTimeout(()=>{i(r)},c);return()=>{clearTimeout(d)}},[r,c]),l}function g(){const[r,c]=o.useState(""),[l,i]=o.useState([]),[d,m]=o.useState(!1),a=h(r,500);o.useEffect(()=>{if(!a){i([]);return}const t=new AbortController,n=t.signal;return(async()=>{m(!0);try{const u=await(await fetch(`https://dummyjson.com/products/search?q=${a}`,{signal:n})).json();i(u.products||[])}catch(s){s.name!=="AbortError"&&console.error("Fetch error:",s)}finally{m(!1)}})(),()=>{t.abort()}},[a]);const x=(t,n)=>{if(!n)return t;const p=t.split(new RegExp(`(${n})`,"gi"));return e.jsx("span",{children:p.map((s,u)=>s.toLowerCase()===n.toLowerCase()?e.jsx("span",{className:"bg-yellow-200 text-black font-bold",children:s},u):s)})};return e.jsxs("div",{className:"max-w-md mx-auto p-6 min-h-screen",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"防抖搜索 + 关键词高亮"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:r,onChange:t=>c(t.target.value),placeholder:"输入 phone, laptop 等...",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 shadow-sm"}),d&&e.jsx("div",{className:"absolute right-3 top-3 text-gray-400 text-sm",children:"加载中..."})]}),e.jsxs("ul",{className:"mt-4 bg-white rounded-lg shadow-lg divide-y divide-gray-100 border border-gray-100",children:[l.map(t=>e.jsxs("li",{className:"p-3 hover:bg-gray-50 cursor-pointer transition-colors",children:[e.jsx("div",{className:"font-medium text-gray-800",children:x(t.title,a)}),e.jsx("div",{className:"text-xs text-gray-500 mt-1 truncate",children:t.description})]},t.id)),l.length===0&&a&&!d&&e.jsx("li",{className:"p-3 text-gray-400 text-center",children:"无搜索结果"})]})]})}export{g as default};
