import{r as a,j as e}from"./index-CHTIxdpO.js";function b({src:s,alt:t,className:i,aspectRatio:l="56.25%"}){const[o,d]=a.useState(!1),[c,m]=a.useState(!1),n=a.useRef(null);a.useEffect(()=>{if(o)return;const r=new IntersectionObserver(x=>{x[0].isIntersecting&&(d(!0),r.disconnect())},{rootMargin:"100px"});return n.current&&r.observe(n.current),()=>{r&&r.disconnect()}},[o]);const u=()=>{m(!0)};return e.jsxs("div",{ref:n,className:`relative overflow-hidden bg-gray-200 rounded-lg ${i}`,style:{paddingBottom:l},children:[!c&&e.jsx("div",{className:"absolute inset-0 bg-gray-300 animate-pulse z-10"}),o&&e.jsx("img",{src:s,alt:t,onLoad:u,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-700 ease-in-out
            ${c?"opacity-100 blur-0":"opacity-0 blur-sm"} // Tailwind 控制透明度和模糊
          `})]})}const f=Array.from({length:10}).map((s,t)=>({id:t,src:`https://picsum.photos/seed/${t+100}/800/600`,desc:`Photo by Picsum ${t+1}`}));function p(){return e.jsxs("div",{className:"max-w-3xl mx-auto p-6 min-h-screen",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"图片懒加载 + 渐变过渡 Demo"}),e.jsxs("p",{className:"mb-8 text-gray-600",children:["向下滚动查看效果。图片进入视口前显示骨架屏，进入后开始请求，加载完成后平滑过渡显示。",e.jsx("br",{}),'(建议在 Chrome DevTools 的 Network 中开启 "Slow 3G" 模拟慢网速来观察明显效果)']}),e.jsxs("div",{className:"space-y-12",children:[e.jsx("div",{className:"h-64 bg-blue-50 rounded p-4 mb-8 flex items-center justify-center text-blue-800 font-medium",children:"↓ 向下滚动开始加载图片 ↓"}),e.jsxs("div",{className:"space-y-4",children:[f.map(s=>e.jsxs("div",{className:"bg-white p-4 shadow-sm rounded-xl border border-gray-100",children:[e.jsx(b,{src:s.src,alt:s.desc,aspectRatio:"75%"}),e.jsx("p",{className:"mt-3 text-sm text-gray-500",children:s.desc})]},s.id)),e.jsx("div",{className:"h-32 bg-gray-50 rounded p-4 flex items-center justify-center text-gray-400",children:"到底了"})]})]})]})}export{p as default};
