import{c as A,r as c,j as e}from"./index-DwFIOpLM.js";import{N as V,C as U,a as q,Z as G,E as J,A as Z,B as K}from"./zap-SsDWNL4G.js";const P=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Q=A("circle-alert",P);const W=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],X=A("text-align-start",W),Y=n=>{const a=["React æ˜¯ä¸€ä¸ªç”¨äºŽæž„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ã€‚","è™šæ‹Ÿæ»šåŠ¨ï¼ˆVirtual Scrollingï¼‰æ˜¯å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ã€‚","Tailwind CSS æ˜¯ä¸€ä¸ªåŠŸèƒ½ç±»ä¼˜å…ˆçš„ CSS æ¡†æž¶ã€‚","åœ¨ä¸ç­‰é«˜åˆ—è¡¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åŠ¨æ€æµ‹é‡æ¯ä¸ªåˆ—è¡¨é¡¹çš„çœŸå®žé«˜åº¦ã€‚","å¦‚æžœä¸è¿›è¡Œä¼˜åŒ–ï¼Œæ¸²æŸ“ 10 ä¸‡ä¸ª DOM èŠ‚ç‚¹ä¼šå¯¼è‡´æµè§ˆå™¨å¡æ­»ã€‚","è¿™æ˜¯ä¸€æ®µæ¯”è¾ƒé•¿çš„æ–‡æœ¬ï¼Œæ—¨åœ¨æµ‹è¯•æ¢è¡ŒåŽçš„é«˜åº¦è®¡ç®—æ˜¯å¦å‡†ç¡®è¿™æ˜¯ä¸€æ®µæ¯”è¾ƒé•¿çš„æ–‡æœ¬ï¼Œæ—¨åœ¨æµ‹è¯•æ¢è¡ŒåŽçš„é«˜åº¦è®¡ç®—æ˜¯å¦å‡†ç¡®è¿™æ˜¯ä¸€æ®µæ¯”è¾ƒé•¿çš„æ–‡æœ¬ï¼Œæ—¨åœ¨æµ‹è¯•æ¢è¡ŒåŽçš„é«˜åº¦è®¡ç®—æ˜¯å¦å‡†ç¡®è¿™æ˜¯ä¸€æ®µéžå¸¸éžå¸¸é•¿çš„æ–‡æœ¬ï¼Œç”¨æ¥æµ‹è¯•è‡ªåŠ¨æ¢è¡ŒåŽçš„é«˜åº¦å˜åŒ–ã€‚å®ƒåŒ…å«äº†å¾ˆå¤šåºŸè¯ï¼Œä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†æŠŠè¿™ä¸ª div æ’‘é«˜ï¼Œçœ‹çœ‹æˆ‘ä»¬çš„æµ‹é‡é€»è¾‘å‡†ä¸å‡†ã€‚å¦‚æžœä¸å‡†çš„è¯ï¼Œåˆ—è¡¨å°±ä¼šæŠ–åŠ¨ï¼Œç”¨æˆ·ä½“éªŒå°±ä¼šå¾ˆå·®ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»ä½¿ç”¨ ResizeObserver æˆ–è€… getBoundingClientRect æ¥ç²¾ç¡®èŽ·å–é«˜åº¦ã€‚","çŸ­æ–‡æœ¬ã€‚","ä¸­ç­‰é•¿åº¦çš„æ–‡æœ¬ï¼Œå¤§æ¦‚å æ®ä¸¤è¡Œå·¦å³çš„ç©ºé—´ï¼Œå…·ä½“å–å†³äºŽå±å¹•å®½åº¦ã€‚"];return Array.from({length:n},(d,p)=>({id:p,index:p,content:a[Math.floor(Math.random()*a.length)],color:p%2===0?"bg-white":"bg-gray-50"}))},I=1e3,v=80,ee=500,m={SMART:{id:"smart",name:"Smart Hybrid",desc:"æ™ºèƒ½åˆ¤æ–­ï¼šè¿‘è·ç¦»å¹³æ»‘ï¼Œè¿œè·ç¦»çž¬ç§»",icon:e.jsx(K,{size:16})},NATIVE:{id:"native",name:"Native Smooth",desc:"å¼ºåˆ¶åŽŸç”Ÿå¹³æ»‘ (å¯èƒ½æœ‰è¯¯å·®)",icon:e.jsx(Z,{size:16})},BLUR:{id:"blur",name:"Blur & Teleport",desc:"æ¨¡ç³Šçž¬ç§» (å¼ºçƒˆæŽ¨è)",icon:e.jsx(J,{size:16})},FLASH:{id:"flash",name:"Flash Skip",desc:"åˆ†æ®µåŠ é€ŸåŠ¨ç”»",icon:e.jsx(G,{size:16})}};function oe(){const[n]=c.useState(()=>Y(I)),a=c.useRef(null),[d,p]=c.useState(()=>n.map((t,s)=>({index:s,height:v,top:s*v,bottom:(s+1)*v,isMeasured:!1}))),[g,C]=c.useState(0),[f,R]=c.useState(m.SMART.id),[b,E]=c.useState(""),[z,N]=c.useState(!1),[w,h]=c.useState(null),B=d[d.length-1].bottom,S=t=>{let s=0,r=d.length-1,o=-1;for(;s<=r;){const l=Math.floor((s+r)/2),x=d[l].bottom;if(x===t)return l+1;x<t?s=l+1:((o===-1||o>l)&&(o=l),r=l-1)}return o},j=S(g),T=Math.min(j+10,n.length),L=n.slice(j,T),_=t=>{requestAnimationFrame(()=>{C(t.target.scrollTop)})},D=(t,s)=>{p(r=>{const o=r[t];if(o.isMeasured&&Math.abs(o.height-s)<.5)return r;const l=[...r];if(l[t]={...o,height:s,bottom:o.top+s,isMeasured:!0},s-o.height!==0)for(let i=t+1;i<l.length;i++)l[i].top=l[i-1].bottom,l[i].bottom=l[i].top+l[i].height;return l})},y=t=>{if(!a.current)return;let s=0;if(t==="top"?s=0:t==="bottom"?s=n.length-1:s=parseInt(t,10),isNaN(s))return;s=Math.max(0,Math.min(s,n.length-1));const r=d[s].top,o=a.current.scrollTop,l=S(o),x=Math.abs(s-l);switch(f){case m.SMART.id:x<=50?(h(`è¿‘è·ç¦» (${x}) -> å¹³æ»‘æ»šåŠ¨`),M(r)):(h(`è¿œè·ç¦» (${x}) -> æ¨¡ç³Šçž¬ç§» (æŽ¨è)`),k(r));break;case m.NATIVE.id:h("æ‰§è¡ŒåŽŸç”Ÿå¹³æ»‘æ»šåŠ¨"),M(r);break;case m.BLUR.id:h("æ‰§è¡Œæ¨¡ç³Šçž¬ç§»"),k(r);break;case m.FLASH.id:h("æ‰§è¡Œåˆ†æ®µå¸§åŠ¨ç”»"),O(o,r,r-o);break;default:a.current.scrollTop=r}},M=t=>{a.current.scrollTo({top:t,behavior:"smooth"})},k=async t=>{N(!0),await new Promise(s=>setTimeout(s,200)),a.current.scrollTop=t,requestAnimationFrame(()=>{setTimeout(()=>N(!1),80)})},O=(t,s,r)=>{const o=performance.now(),l=800,x=Math.abs(r)>3e3,i=H=>{const $=H-o,u=Math.min($/l,1),F=u<.5?4*u*u*u:1-Math.pow(-2*u+2,3)/2;x&&u>.4&&u<.7?a.current.scrollTop=t+r*.95:a.current.scrollTop=t+r*F,u<1?requestAnimationFrame(i):a.current.scrollTop=s};requestAnimationFrame(i)};return e.jsx("div",{className:"h-[calc(100vh-88px)] flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-4xl bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-200 flex flex-col md:flex-row",children:[e.jsxs("div",{className:"w-full md:w-72 bg-gray-50 border-r border-gray-200 p-5 flex flex-col gap-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2 mb-1",children:[e.jsx(X,{size:20,className:"text-purple-600"}),"ä¸ç­‰é«˜åˆ—è¡¨"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Total: ",I," (Dynamic Height)"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Scroll Strategy"}),e.jsx("div",{className:"flex flex-col gap-2",children:Object.values(m).map(t=>e.jsxs("button",{onClick:()=>{R(t.id),h(null)},className:`flex items-start gap-3 p-3 rounded-lg text-left transition-all border ${f===t.id?"bg-white border-purple-500 shadow-md ring-1 ring-purple-500":"bg-white border-gray-200 hover:border-purple-300 hover:bg-purple-50"}`,children:[e.jsx("div",{className:`mt-1 ${f===t.id?"text-purple-600":"text-gray-400"}`,children:t.icon}),e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-bold ${f===t.id?"text-purple-700":"text-gray-700"}`,children:t.name}),e.jsx("div",{className:"text-xs text-gray-500 mt-0.5 leading-tight",children:t.desc})]})]},t.id))})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-200",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Navigation"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"Index...",value:b,onChange:t=>E(t.target.value),onKeyDown:t=>t.key==="Enter"&&y(b),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),e.jsx("button",{onClick:()=>y(b),className:"px-4 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:e.jsx(V,{size:18})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsxs("button",{onClick:()=>y("top"),className:"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 rounded-md text-sm text-gray-600 hover:text-purple-600 hover:border-purple-500",children:[e.jsx(U,{size:16})," Top"]}),e.jsxs("button",{onClick:()=>y("bottom"),className:"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 rounded-md text-sm text-gray-600 hover:text-purple-600 hover:border-purple-500",children:[e.jsx(q,{size:16})," Bottom"]})]})]})]}),e.jsxs("div",{className:"flex-1 relative bg-white h-[600px] md:h-auto flex flex-col",children:[e.jsxs("div",{className:"absolute top-4 right-4 z-10 flex flex-col items-end gap-2 pointer-events-none",children:[e.jsxs("div",{className:"bg-gray-900/80 backdrop-blur text-white px-3 py-1.5 rounded-full text-xs font-mono shadow-lg",children:["View: ",j," - ",T]}),w&&e.jsx("div",{className:"bg-purple-600/90 backdrop-blur text-white px-3 py-1.5 rounded-full text-xs font-bold shadow-lg animate-fade-in-down",children:w})]}),e.jsx("div",{className:"flex-1 p-6 overflow-hidden",children:e.jsx("div",{ref:a,className:`
                relative overflow-auto border border-gray-200 rounded-xl shadow-inner bg-gray-50 custom-scrollbar
                transition-all duration-300 ease-in-out
                ${z?"opacity-40 blur-[2px] scale-95":"opacity-100 blur-0 scale-100"}
              `,style:{height:ee},onScroll:_,children:e.jsx("div",{style:{height:B,position:"relative"},children:L.map(t=>{const s=d[t.index];return e.jsx(te,{item:t,isTarget:t.index===parseInt(b),style:{position:"absolute",top:s.top,left:0,width:"100%"},onMeasure:D},t.id)})})})}),e.jsxs("div",{className:"p-3 bg-purple-50 border-t border-purple-100 text-xs text-purple-600 flex items-start gap-2",children:[e.jsx(Q,{size:14,className:"mt-0.5 shrink-0"}),'æ³¨æ„è§‚å¯Ÿï¼šè·³è½¬åˆ°æœªæ¸²æŸ“åŒºåŸŸæ—¶ï¼Œåˆ—è¡¨å¯èƒ½ä¼šåœ¨åŠ è½½çž¬é—´è½»å¾®æŠ–åŠ¨ï¼Œè¿™æ˜¯å› ä¸ºé¢„ä¼°é«˜åº¦(80px)ä¸ŽçœŸå®žé«˜åº¦ä¸ç¬¦ï¼Œè§¦å‘äº†ä¿®æ­£é€»è¾‘ã€‚ä½¿ç”¨ "Blur" æ¨¡å¼å¯å®Œç¾ŽæŽ©ç›–æ­¤çŽ°è±¡ã€‚']})]})]})})}const te=({item:n,style:a,onMeasure:d,isTarget:p})=>{const g=c.useRef(null);return c.useLayoutEffect(()=>{g.current&&d(n.index,g.current.getBoundingClientRect().height)},[]),e.jsxs("div",{ref:g,style:a,className:`
        p-4 border-b border-gray-100 flex gap-4 transition-all duration-500
        ${p?"bg-purple-100 scale-[1.02] z-10 shadow-sm":`${n.color} hover:bg-purple-50`}
      `,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center font-bold text-sm shrink-0",children:n.index}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-bold text-gray-800 text-sm mb-1 flex justify-between",children:[e.jsxs("span",{children:["Dynamic Row #",n.index]}),p&&e.jsx("span",{className:"text-purple-600 text-xs",children:"ðŸŽ¯ Target"})]}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:n.content})]})]})};export{oe as default};
