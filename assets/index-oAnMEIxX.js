import{r as t,j as e}from"./index-CHTIxdpO.js";const f=r=>new Promise(o=>{setTimeout(()=>{const n=Array.from({length:10},(d,l)=>({id:(r-1)*10+l+1,title:`Item ${(r-1)*10+l+1}`,desc:"这是一条模拟的面试数据内容...",color:`hsl(${Math.random()*360}, 70%, 80%)`}));o({data:n,hasMore:r<5})},1e3)});function b(){const[r,o]=t.useState([]),[n,d]=t.useState(!1),[l,x]=t.useState(1),[i,u]=t.useState(!0),c=t.useRef(),h=t.useCallback(s=>{n||(c.current&&c.current.disconnect(),c.current=new IntersectionObserver(a=>{a[0].isIntersecting&&i&&(console.log("触底了，加载下一页..."),x(m=>m+1))}),s&&c.current.observe(s))},[n,i]);return t.useEffect(()=>{(async()=>{d(!0);const a=await f(l);o(m=>[...m,...a.data]),u(a.hasMore),d(!1)})()},[l]),e.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-gray-50 min-h-screen",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"无限加载 Demo"}),e.jsx("div",{className:"space-y-4",children:r.map((s,a)=>r.length===a+1?e.jsxs("div",{ref:h,className:"p-6 rounded-lg shadow-md transition-transform hover:scale-105",style:{backgroundColor:s.color},children:[e.jsxs("h2",{className:"text-xl font-bold",children:[s.title," (最后一条-观察点)"]}),e.jsx("p",{className:"text-gray-700",children:s.desc})]},s.id):e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:s.title}),e.jsx("p",{className:"text-gray-500",children:s.desc})]},s.id))}),n&&e.jsxs("div",{className:"flex justify-center items-center p-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"加载中..."})]}),!i&&e.jsx("div",{className:"text-center p-4 text-gray-400",children:"--- 我是有底线的 ---"})]})}export{b as default};
